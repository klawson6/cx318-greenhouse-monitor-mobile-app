<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Connor">

<title>SensorTag Data</title>
<link rel="stylesheet" href="style1.css" title="Mainly gray tbh"
    type="text/css" media="screen"/>


</head>
<body>

<h1>  
     <a href="index.html" style="vertical-align: middle;">
		<img class="arrow imgGH" src="arrow-left.svg" alt="Back Arrow" >
	</a>
	SensorTag Data Results!
	
</h1>
<p>Any temperature, light or humidity data was taken from the sensortag with device ID <i>987bf3131f23</i></p>
<p>The results shown below will update every 5 seconds, if the sensortag is on.</p>

<h2> Temperature Results: </h2>
<p>	<div class="margin" id="myTemp">Temperature placeholder </div> <br> </p>
<h2> Light Results: </h2>
<p> <div class="margin" id="myLight">Light placeholder</div> <br> </p>
<h2> Humidity Results: </h2>
<p> <div class="margin" id="myHumidity">Humidity placeholder</div><br> </p>

<b><p id="message"></p></b>


<script>
getTemp();
getLight();
getHumidity();
var delay = 1000*50; //For every 5 seconds
setInterval(getTemp, delay);
setInterval(getLight, delay);
setInterval(getHumidity, delay); 

function getTemp(){
var xhttp1 = new XMLHttpRequest();
xhttp1.onreadystatechange = function() {
    if (xhttp1.readyState == 4 && xhttp1.status == 200) {
       // Typical action to be performed when the document is ready:
	   if(xhttp1.responseText == ";"){
			document.getElementById("myTemp").innerHTML = "No temperature to display";
			document.getElementById("message").innerHTML = "Sensortag must be off.";
		}
		else{
       document.getElementById("myTemp").innerHTML = xhttp1.responseText;
	   document.getElementById("message").innerHTML = "Recieving sensortag data successfully.";
	   }
    }
};
xhttp1.open("GET", "https://conrfield.com:1880/getTemp", true);
xhttp1.send();
}

function getLight(){
var xhttp2 = new XMLHttpRequest();
xhttp2.onreadystatechange = function() {
    if (xhttp2.readyState == 4 && xhttp2.status == 200) {
       // Typical action to be performed when the document is ready:
	   if(xhttp2.responseText == ";"){
			document.getElementById("myLight").innerHTML = "No light to display";
		}
		else{
       document.getElementById("myLight").innerHTML = xhttp2.responseText;
	   }
    }
};
xhttp2.open("GET", "https://conrfield.com:1880/getLight", true);
xhttp2.send();
}

function getHumidity(){
var xhttp3 = new XMLHttpRequest();
xhttp3.onreadystatechange = function() {
    if (xhttp3.readyState == 4 && xhttp3.status == 200) {
       // Typical action to be performed when the document is ready:
	   if(xhttp3.responseText == ";"){
			document.getElementById("myHumidity").innerHTML = "No humidity to display";
		}
		else{
       document.getElementById("myHumidity").innerHTML = xhttp3.responseText;
	   }
    }
};
xhttp3.open("GET", "https://conrfield.com:1880/getHumidity", true);
xhttp3.send();
}

</script>


</body>
</html>
